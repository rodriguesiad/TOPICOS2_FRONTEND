<div class="container">
    <div class="box">
        <div class="header">
            <h2 class="title">Faça o seu cadastro</h2>
            <div id="logo">
                <img src="../../../../assets/images/logo.png" alt="Logo do sistema">
            </div>
        </div>

        <div class="body">
            <div class="part1">
                <h3 class="title">Dados Pessoais</h3>
                <form [formGroup]="formGroup">
                    <mat-form-field class="full-width" appearance="outline">
                        <mat-label>Nome</mat-label>
                        <input matInput formControlName="nome">
                        <mat-error
                            *ngIf="formGroup.get('nome')?.hasError('required') && formGroup.get('nome')?.touched">
                            O campo Nome é obrigatório.
                        </mat-error>
                        <mat-error *ngIf="formGroup.get('nome')?.value && formGroup.get('nome')?.hasError('apiError')">
                            {{ formGroup.get('nome')?.getError('apiError') }}
                        </mat-error>
                    </mat-form-field>

                    <mat-form-field class="full-width" appearance="outline">
                        <mat-label>E-mail</mat-label>
                        <input matInput formControlName="email">
                        <mat-error
                            *ngIf="formGroup.get('email')?.hasError('required') && formGroup.get('email')?.touched">
                            O campo E-mail é obrigatório.
                        </mat-error>
                        <mat-error
                            *ngIf="formGroup.get('email')?.value && formGroup.get('email')?.hasError('apiError')">
                            {{ formGroup.get('email')?.getError('apiError') }}
                        </mat-error>
                    </mat-form-field>

                    <mat-form-field class="full-width" appearance="outline">
                        <mat-label>CPF</mat-label>
                        <input matInput formControlName="cpf">
                        <mat-error *ngIf="formGroup.get('cpf')?.hasError('required') && formGroup.get('cpf')?.touched">
                            O campo CPF é obrigatório.
                        </mat-error>
                        <mat-error *ngIf="formGroup.get('cpf')?.value && formGroup.get('cpf')?.hasError('apiError')">
                            {{ formGroup.get('cpf')?.getError('apiError') }}
                        </mat-error>
                    </mat-form-field>

                    <mat-form-field class="full-width" appearance="outline">
                        <mat-label>Data de Nascimento</mat-label>
                        <input matInput [matDatepicker]="picker" formControlName="dataNascimento" [max]="maxDate">
                        <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
                        <mat-datepicker #picker></mat-datepicker>
                        <mat-error *ngIf="formGroup.get('dataNascimento')?.hasError('apiError')">
                            {{ formGroup.get('dataNascimento')?.getError('apiError') }}
                        </mat-error>
                    </mat-form-field>

                    <mat-form-field class="full-width" appearance="outline">
                        <mat-label>Senha</mat-label>
                        <input matInput formControlName="senha">
                        <mat-error
                            *ngIf="formGroup.get('senha')?.hasError('required') && formGroup.get('csenhapf')?.touched">
                            O campo Senha é obrigatório.
                        </mat-error>
                        <mat-error
                            *ngIf="formGroup.get('senha')?.value && formGroup.get('senha')?.hasError('apiError')">
                            {{ formGroup.get('senha')?.getError('apiError') }}
                        </mat-error>
                    </mat-form-field>

                    <mat-form-field class="full-width" appearance="outline">
                        <mat-label>Confirmar senha</mat-label>
                        <input matInput formControlName="confirmarSenha" (input)="validarConfirmacaoSenha()">
                        <mat-error *ngIf="formGroup.get('confirmarSenha')?.hasError('senhaNaoCorresponde')">
                            As senhas não correspondem.
                        </mat-error>
                    </mat-form-field>
                </form>
            </div>
            <div class="part2">
                <h3 class="title">Endereço</h3>

                <form [formGroup]="formEndereco">
                    <mat-form-field class="full-width" appearance="outline">
                        <mat-label>CEP</mat-label>
                        <input matInput formControlName="cep">
                        <mat-error *ngIf="formGroup.get('cep')?.hasError('required') && formGroup.get('cep')?.touched">
                            O campo CEP é obrigatório.
                        </mat-error>
                        <mat-error *ngIf="formGroup.get('cep')?.value && formGroup.get('cep')?.hasError('apiError')">
                            {{ formGroup.get('cep')?.getError('apiError') }}
                        </mat-error>
                    </mat-form-field>

                    <div class="sub-form">
                        <mat-form-field appearance="outline">
                            <mat-label>Estado</mat-label>
                            <mat-select formControlName="estado">
                                <mat-option *ngFor="let estado of estados" [value]="estado">
                                    {{ estado.nome }}
                                </mat-option>
                            </mat-select>
                            <mat-error
                                *ngIf="formGroup.get('estado')?.hasError('required') && formGroup.get('estado')?.touched">
                                O campo Estado é obrigatório.
                            </mat-error>
                            <mat-error
                                *ngIf="formGroup.get('estado')?.value && formGroup.get('estado')?.hasError('apiError')">
                                {{ formGroup.get('estado')?.getError('apiError') }}
                            </mat-error>
                        </mat-form-field>

                        <mat-form-field appearance="outline">
                            <mat-label>Cidade</mat-label>
                            <mat-select formControlName="municipio">
                                <mat-option *ngFor="let cidade of cidades" [value]="cidade">
                                    {{ cidade.nome }}
                                </mat-option>
                            </mat-select>
                            <mat-error
                                *ngIf="formGroup.get('municipio')?.hasError('required') && formGroup.get('municipio')?.touched">
                                O campo Cidade é obrigatório.
                            </mat-error>
                            <mat-error
                                *ngIf="formGroup.get('municipio')?.value && formGroup.get('municipio')?.hasError('apiError')">
                                {{ formGroup.get('municipio')?.getError('apiError') }}
                            </mat-error>
                        </mat-form-field>
                    </div>

                    <mat-form-field class="full-width" appearance="outline">
                        <mat-label>Bairro</mat-label>
                        <input matInput formControlName="bairro">
                        <mat-error
                            *ngIf="formGroup.get('bairro')?.hasError('required') && formGroup.get('bairro')?.touched">
                            O campo Bairro é obrigatório.
                        </mat-error>
                        <mat-error
                            *ngIf="formGroup.get('bairro')?.value && formGroup.get('bairro')?.hasError('apiError')">
                            {{ formGroup.get('bairro')?.getError('apiError') }}
                        </mat-error>
                    </mat-form-field>

                    <mat-form-field class="full-width" appearance="outline">
                        <mat-label>Logradouro</mat-label>
                        <input matInput formControlName="logradouro">
                        <mat-error
                            *ngIf="formGroup.get('logradouro')?.hasError('required') && formGroup.get('logradouro')?.touched">
                            O campo Logradouro é obrigatório.
                        </mat-error>
                        <mat-error
                            *ngIf="formGroup.get('logradouro')?.value && formGroup.get('logradouro')?.hasError('apiError')">
                            {{ formGroup.get('logradouro')?.getError('apiError') }}
                        </mat-error>
                    </mat-form-field>

                    <mat-form-field class="full-width" appearance="outline">
                        <mat-label>Número</mat-label>
                        <input matInput formControlName="numero">
                        <mat-error
                            *ngIf="formGroup.get('numero')?.hasError('required') && formGroup.get('numero')?.touched">
                            O campo Número é obrigatório.
                        </mat-error>
                        <mat-error
                            *ngIf="formGroup.get('numero')?.value && formGroup.get('numero')?.hasError('apiError')">
                            {{ formGroup.get('numero')?.getError('apiError') }}
                        </mat-error>
                    </mat-form-field>

                    <mat-form-field class="full-width" appearance="outline">
                        <mat-label>Complemento</mat-label>
                        <input matInput formControlName="complemento">
                        <mat-error *ngIf="formGroup.get('complemento')?.hasError('apiError')">
                            {{ formGroup.get('complemento')?.getError('apiError') }}
                        </mat-error>
                    </mat-form-field>
                </form>
            </div>
        </div>

        <div class="footer">
            <button mat-raised-button id="cancel-button" type="submit" routerLink="/auth/login">Cancelar</button>
            <button mat-raised-button type="submit" (click)="salvar()">Cadastrar</button>
        </div>
    </div>
</div>